<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-02-07 Tue 18:56 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Conway's Game of Life</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Eduardo AcuÃ±a Yeomans" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../style/solarized-light.css" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Alegreya|Alegreya+SC" />
<link rel="stylesheet" type="text/css" href="../style/mods.css" />

<script type="text/javascript" src="../style/org-info.js">
/**
 *
 * @source: ../style/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in ../style/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in ../style/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "../index.html");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "1");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Conway's Game of Life</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org643caf3">1. Introduction</a></li>
<li><a href="#orga85fcb4">2. The grid abstraction</a>
<ul>
<li><a href="#org97e9379">2.1. Creating a grid</a>
<ul>
<li><a href="#org15bc3cf">2.1.1. <code>&lt;src/grid.js&gt;</code></a></li>
</ul>
</li>
<li><a href="#org04a6b9a">2.2. Obtaining the rows and columns of a row</a>
<ul>
<li><a href="#org14ce797">2.2.1. <code>&lt;src/grid.js&gt;</code></a></li>
<li><a href="#orgd5fb035">2.2.2. <code>&lt;src/grid.js&gt;</code></a></li>
</ul>
</li>
<li><a href="#org664e7a0">2.3. Getting a particular value of a grid</a>
<ul>
<li><a href="#org83060b4">2.3.1. <code>&lt;src/grid.js&gt;</code></a></li>
<li><a href="#org7513fcf">2.3.2. <code>&lt;src/grid.js&gt;</code></a></li>
</ul>
</li>
<li><a href="#org22d0f3a">2.4. Changing a grid value</a>
<ul>
<li><a href="#orgd9b8ec5">2.4.1. <code>&lt;src/grid.js&gt;</code></a></li>
</ul>
</li>
<li><a href="#org019795e">2.5. Interface</a>
<ul>
<li><a href="#org54927b2">2.5.1. <code>&lt;src/grid.js&gt;</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orge51c7de">3. Life rules</a>
<ul>
<li><a href="#org77b4938">3.1. Mapping life to grids</a>
<ul>
<li><a href="#orgd6aa842">3.1.1. <code>&lt;src/life.js&gt;</code></a></li>
<li><a href="#orgf18ab73">3.1.2. <code>&lt;src/life.js&gt;</code></a></li>
<li><a href="#orga46dce4">3.1.3. <code>&lt;src/life.js&gt;</code></a></li>
</ul>
</li>
<li><a href="#org31c5593">3.2. Evolving life</a>
<ul>
<li><a href="#orgcb365a5">3.2.1. <code>&lt;src/life.js&gt;</code></a></li>
<li><a href="#org26a254d">3.2.2. <code>&lt;src/life.js&gt;</code></a></li>
</ul>
</li>
<li><a href="#org7353222">3.3. Interface</a>
<ul>
<li><a href="#orgdd22319">3.3.1. <code>&lt;src/life.js&gt;</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd0bc194">4. React JS Components</a>
<ul>
<li>
<ul>
<li><a href="#org1b39057">4.0.1. <code>&lt;src/reactlife.jsx&gt;</code></a></li>
</ul>
</li>
<li><a href="#org0dd512a">4.1. Evolving life periodically</a>
<ul>
<li><a href="#org7280384">4.1.1. <code>&lt;&lt;gol-timer-setup&gt;&gt;</code></a></li>
<li><a href="#orgbf0a80a">4.1.2. <code>&lt;&lt;gol-simulation&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="#orga52bbf6">4.2. Controlling the grid</a>
<ul>
<li><a href="#org12ccd50">4.2.1. <code>&lt;&lt;gol-grid-click&gt;&gt;</code></a></li>
<li><a href="#orga599181">4.2.2. <code>&lt;&lt;gol-play-pause-click&gt;&gt;</code></a></li>
<li><a href="#orgc59584b">4.2.3. <code>&lt;&lt;gol-clear-click&gt;&gt;</code></a></li>
<li><a href="#org6e1ed14">4.2.4. <code>&lt;&lt;gol-randomize-click&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="#org17ebb0e">4.3. GOL initialization</a>
<ul>
<li><a href="#orga0339d4">4.3.1. <code>&lt;&lt;gol-constructor&gt;&gt;</code></a></li>
<li><a href="#orged064e2">4.3.2. <code>&lt;&lt;gol-view&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="#org910975a">4.4. Playing and pausing the game</a>
<ul>
<li><a href="#org62091ba">4.4.1. <code>&lt;src/reactlife.jsx&gt;</code></a></li>
<li><a href="#org96f6dc6">4.4.2. <code>&lt;&lt;control-pause&gt;&gt;</code></a></li>
<li><a href="#org69bb265">4.4.3. <code>&lt;&lt;control-play&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="#orge6ab90f">4.5. Clearing and randomizing the game</a>
<ul>
<li><a href="#orgaf251e3">4.5.1. <code>&lt;src/reactlife.jsx&gt;</code></a></li>
<li><a href="#org8ba7497">4.5.2. <code>&lt;src/reactlife.jsx&gt;</code></a></li>
<li><a href="#org349c107">4.5.3. <code>&lt;&lt;control-clear&gt;&gt;</code></a></li>
<li><a href="#org2105e8d">4.5.4. <code>&lt;&lt;control-randomize&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="#org456652b">4.6. Grid visualization</a>
<ul>
<li><a href="#orgcfb5798">4.6.1. <code>&lt;src/reactlife.jsx&gt;</code></a></li>
<li><a href="#orgce7542a">4.6.2. <code>&lt;&lt;table-cell&gt;&gt;</code></a></li>
<li><a href="#org9a3409e">4.6.3. <code>&lt;&lt;table-row&gt;&gt;</code></a></li>
<li><a href="#orgf4edba7">4.6.4. <code>&lt;&lt;table-main&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="#org125aa13">4.7. Rendering into the DOM</a>
<ul>
<li><a href="#org6b2952a">4.7.1. <code>&lt;src/reactlife.jsx&gt;</code></a></li>
<li><a href="#org339a418">4.7.2. <code>&lt;&lt;conways-game&gt;&gt;</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org244d9ac">5. The HTML document</a>
<ul>
<li>
<ul>
<li><a href="#org0283fc1">5.0.1. <code>&lt;src/index.html&gt;</code></a></li>
<li><a href="#orgb0d1520">5.0.2. <code>&lt;src/style.css&gt;</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
\(\DeclareMathOperator{\modulo}{modulo}\)

<div id="outline-container-org643caf3" class="outline-2">
<h2 id="org643caf3"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This document describes a first attempt at implementing the classic zero-player game <i>Conway's Game of Life</i> in Javascript using the React JS library.
</p>

<p>
The Game of Life (GOL for short) consists of a two-dimensional grid of <i>cells</i> representing living things. Each cell can be in one of two states, alive or dead, and each turn some cells die, some are born and others stay in the same state. The game requires an initial condition as input, that is, which cells are alive and which are dead; from there a particular set of rules are applied iteratively to each cell and the configuration evolves over time, rendering a beautiful simulation of apparent randomness and chaos.
</p>

<p>
The GOL rules for each cell involve counting the number of living cells in the <i>neighborhood</i> of a particular cell. In the following image the neighborhood of a cell (pictured in blue) consists of all the adjacent cells (pictured in red).
</p>


<div id="org0a543f0" class="figure">
<p><img src="./img/neighbors.png" alt="neighbors.png" width="200px" />
</p>
</div>

<p>
The evolution of every cell in the grid, from one step of the game to the next, obeys the following rules:
</p>
<ul class="org-ul">
<li>Any living cell with fewer than two live neighbours dies;</li>
<li>Any living cell with two or three living neighbours lives on to the next generation;</li>
<li>Any living cell with more than three living neighbours dies;</li>
<li>Any dead cell with exactly three living neighbours becomes a live cell.</li>
</ul>
</div>
</div>

<div id="outline-container-orga85fcb4" class="outline-2">
<h2 id="orga85fcb4"><span class="section-number-2">2</span> The grid abstraction</h2>
<div class="outline-text-2" id="text-2">
<p>
The two-dimensional grid in GOL is infinite by definition, but this implementation in particular, the grid will be of finite size with connected frontiers. The implementation provides means to:
</p>
<ol class="org-ol">
<li>Create a new grid with values assigned by location.</li>
<li>Obtain the number of rows and columns of a grid.</li>
<li>Obtain the value of a particular location of a grid.</li>
<li>Assign a value to a particular location of a grid.</li>
</ol>
</div>

<div id="outline-container-org97e9379" class="outline-3">
<h3 id="org97e9379"><span class="section-number-3">2.1</span> Creating a grid</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The function <code>make</code> handles the creation of a new grid. Grids are implemented as arrays of rows, where each row is also an array of values.
</p>

<p>
The arguments of <code>make</code> are the number of rows and columns, and a function that takes two arguments (the position in the grid) and returns a value.
</p>
</div>

<div id="outline-container-org15bc3cf" class="outline-4">
<h4 id="org15bc3cf"><span class="section-number-4">2.1.1</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">make</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">nrows</span>, <span style="color: #DFDFDF;">ncols</span>, <span style="color: #DFDFDF;">makeValue</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">g</span> = Array<span style="color: #c678dd;">(</span>nrows<span style="color: #c678dd;">)</span>;
  <span style="color: #51afef;">for</span> <span style="color: #c678dd;">(</span><span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">i</span> = 0; i &lt; nrows; i++<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    g<span style="color: #98be65;">[</span>i<span style="color: #98be65;">]</span> = Array<span style="color: #98be65;">(</span>ncols<span style="color: #98be65;">)</span>;
    <span style="color: #51afef;">for</span> <span style="color: #98be65;">(</span><span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">j</span> = 0; j &lt; ncols; j++<span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
      g<span style="color: #da8548;">[</span>i<span style="color: #da8548;">][</span>j<span style="color: #da8548;">]</span> = makeValue<span style="color: #da8548;">(</span>i, j<span style="color: #da8548;">)</span>;
    <span style="color: #98be65;">}</span>
  <span style="color: #c678dd;">}</span>
  <span style="color: #51afef;">return</span> g;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org04a6b9a" class="outline-3">
<h3 id="org04a6b9a"><span class="section-number-3">2.2</span> Obtaining the rows and columns of a row</h3>
<div class="outline-text-3" id="text-2-2">
<p>
The <code>countRows</code> and <code>countCols</code> functions compute the number of rows and columns respectively for a given grid.
</p>

<p>
Given that the grid is represented as an Array of rows, to obtain it's length one must access the <code>length</code> property. Easy peasy lemon squeezy:
</p>
</div>

<div id="outline-container-org14ce797" class="outline-4">
<h4 id="org14ce797"><span class="section-number-4">2.2.1</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">countRows</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">grid</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> grid.length;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
The number of columns of a grid is almost as easy to determine, it's a matter of calculating the length of any of its rows:
</p>
</div>
</div>

<div id="outline-container-orgd5fb035" class="outline-4">
<h4 id="orgd5fb035"><span class="section-number-4">2.2.2</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">countCols</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">grid</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> grid<span style="color: #c678dd;">[</span>0<span style="color: #c678dd;">]</span>.length;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org664e7a0" class="outline-3">
<h3 id="org664e7a0"><span class="section-number-3">2.3</span> Getting a particular value of a grid</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Locations on a grid are determined by a row and column index, however given that the grid must have connected frontiers one must use some modular arithmetic to handle locations outside the limits of the array.
</p>

<p>
Javascript's <code>%</code> operator computes the <i>remainder</i>, to compute \(\modulo(a,b)\) one can take into account the following:
</p>
<ul class="org-ul">
<li>\(a \geq 0 \implies \modulo(a,b) = a \% b\)</li>
<li>\(a < 0 \implies a \% b = r \in (-b,0],\ (b+r)\%b = \modulo(a,b) = (b + (a \% b)) \% b\)</li>
<li>\(a \geq 0 \implies (b + (a \% b)) \% b = (b + \modulo(a,b)) \% b = \modulo(a,b)\)</li>
</ul>

<p>
The <code>modulo</code> implementation is defined as:
</p>
</div>

<div id="outline-container-org83060b4" class="outline-4">
<h4 id="org83060b4"><span class="section-number-4">2.3.1</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">modulo</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">a</span>, <span style="color: #DFDFDF;">b</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> <span style="color: #c678dd;">(</span><span style="color: #98be65;">(</span>a % b<span style="color: #98be65;">)</span> + b<span style="color: #c678dd;">)</span> % b;
<span style="color: #51afef;">}</span>
</pre>
</div>


<p>
Now one can simply define the function <code>ref</code> in terms of array indexing and <code>modulo</code> to obtain the value of a given location in a grid.
</p>
</div>
</div>

<div id="outline-container-org7513fcf" class="outline-4">
<h4 id="org7513fcf"><span class="section-number-4">2.3.2</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">ref</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">grid</span>, <span style="color: #DFDFDF;">i</span>, <span style="color: #DFDFDF;">j</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> grid<span style="color: #c678dd;">[</span>modulo<span style="color: #98be65;">(</span>i, countRows<span style="color: #da8548;">(</span>grid<span style="color: #da8548;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">][</span>modulo<span style="color: #98be65;">(</span>j, countCols<span style="color: #da8548;">(</span>grid<span style="color: #da8548;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">]</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org22d0f3a" class="outline-3">
<h3 id="org22d0f3a"><span class="section-number-3">2.4</span> Changing a grid value</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Simmilar to the <code>ref</code> function, the implementation of <code>set</code> accepts an aditional value argument to be placed in the specified location of a grid.
</p>
</div>

<div id="outline-container-orgd9b8ec5" class="outline-4">
<h4 id="orgd9b8ec5"><span class="section-number-4">2.4.1</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-4-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">set</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">grid</span>, <span style="color: #DFDFDF;">i</span>, <span style="color: #DFDFDF;">j</span>, <span style="color: #DFDFDF;">value</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  grid<span style="color: #c678dd;">[</span>modulo<span style="color: #98be65;">(</span>i, countRows<span style="color: #da8548;">(</span>grid<span style="color: #da8548;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">][</span>modulo<span style="color: #98be65;">(</span>j, countCols<span style="color: #da8548;">(</span>grid<span style="color: #da8548;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">]</span> = value;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org019795e" class="outline-3">
<h3 id="org019795e"><span class="section-number-3">2.5</span> Interface</h3>
<div class="outline-text-3" id="text-2-5">
<p>
The file <code>src/grid.js</code> contains the code from this section, the object <code>grid</code> is the interface used in other files:
</p>
</div>

<div id="outline-container-org54927b2" class="outline-4">
<h4 id="org54927b2"><span class="section-number-4">2.5.1</span> <code>&lt;src/grid.js&gt;</code></h4>
<div class="outline-text-4" id="text-2-5-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">var</span> <span style="color: #DFDFDF;">grid</span> = <span style="color: #51afef;">{}</span>;
grid.make = make;
grid.countRows = countRows;
grid.countCols = countCols;
grid.ref = ref;
grid.set = set;
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orge51c7de" class="outline-2">
<h2 id="orge51c7de"><span class="section-number-2">3</span> Life rules</h2>
<div class="outline-text-2" id="text-3">
<p>
The next step involves implementing a layer of abstraction on top of grids that represents the GOL rules. This task concearns the following problems:
</p>
<ul class="org-ul">
<li>How to encode GOL concepts with grids.</li>
<li>How to handle GOL transitions.</li>
</ul>

<p>
The following sections tackle these points.
</p>
</div>

<div id="outline-container-org77b4938" class="outline-3">
<h3 id="org77b4938"><span class="section-number-3">3.1</span> Mapping life to grids</h3>
<div class="outline-text-3" id="text-3-1">
<p>
A GOL grid is going to be a grid whose locations hold cells, represented by the values <code>alive</code> or <code>dead</code>. The rules of GOL take into consideration the number of live neighbors of a particular cell, therefore it's convenient to represent the cell's values as <code>1</code> and <code>0</code>, so one can add the alive neighbors more easily.
</p>
</div>

<div id="outline-container-orgd6aa842" class="outline-4">
<h4 id="orgd6aa842"><span class="section-number-4">3.1.1</span> <code>&lt;src/life.js&gt;</code></h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">alive</span> = 1;
<span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">dead</span> = 0;
</pre>
</div>

<p>
To provide a constructor, getter and setter for GOL grids, one can leverage the <code>grid.make</code>, <code>grid.ref</code> and <code>grid.set</code> implementations.
</p>
</div>
</div>

<div id="outline-container-orgf18ab73" class="outline-4">
<h4 id="orgf18ab73"><span class="section-number-4">3.1.2</span> <code>&lt;src/life.js&gt;</code></h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">make</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">nrows</span>, <span style="color: #DFDFDF;">ncols</span>, <span style="color: #DFDFDF;">makeCell</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> grid.make<span style="color: #c678dd;">(</span>nrows, ncols, makeCell<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">var</span> <span style="color: #DFDFDF;">countRows</span> = grid.countRows;
<span style="color: #51afef;">var</span> <span style="color: #DFDFDF;">countCols</span> = grid.countCols;

<span style="color: #51afef;">function</span> <span style="color: #c678dd;">ref</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">life</span>, <span style="color: #DFDFDF;">i</span>, <span style="color: #DFDFDF;">j</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> grid.ref<span style="color: #c678dd;">(</span>life, i, j<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">function</span> <span style="color: #c678dd;">set</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">life</span>, <span style="color: #DFDFDF;">i</span>, <span style="color: #DFDFDF;">j</span>, <span style="color: #DFDFDF;">cell</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  grid.set<span style="color: #c678dd;">(</span>life, i, j, cell<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
One aspect of GOL grids is that each cell has an associated <i>degree</i> of some sort (the number of <code>alive</code> neighbors). The function <code>neighbors</code> computes this value for a given cell location:
</p>
</div>
</div>

<div id="outline-container-orga46dce4" class="outline-4">
<h4 id="orga46dce4"><span class="section-number-4">3.1.3</span> <code>&lt;src/life.js&gt;</code></h4>
<div class="outline-text-4" id="text-3-1-3">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">neighbors</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">life</span>, <span style="color: #DFDFDF;">i</span>, <span style="color: #DFDFDF;">j</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> ref<span style="color: #c678dd;">(</span>life, i-1, j-1<span style="color: #c678dd;">)</span> + ref<span style="color: #c678dd;">(</span>life, i  , j-1<span style="color: #c678dd;">)</span> + ref<span style="color: #c678dd;">(</span>life, i+1, j-1<span style="color: #c678dd;">)</span> +
         ref<span style="color: #c678dd;">(</span>life, i-1, j  <span style="color: #c678dd;">)</span> +          0          + ref<span style="color: #c678dd;">(</span>life, i+1, j  <span style="color: #c678dd;">)</span> +
         ref<span style="color: #c678dd;">(</span>life, i-1, j+1<span style="color: #c678dd;">)</span> + ref<span style="color: #c678dd;">(</span>life, i  , j+1<span style="color: #c678dd;">)</span> + ref<span style="color: #c678dd;">(</span>life, i+1, j+1<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org31c5593" class="outline-3">
<h3 id="org31c5593"><span class="section-number-3">3.2</span> Evolving life</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The next step involves implementing a one-step evolution for a GOL grid. To achive this one can determine a particular cell <i>future</i> with respect to it's value and neighborhood, the following table describes the transition for every possible combination of those two factors.
</p>

<table id="orge2c5134" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" class="center">


<colgroup>
<col  class="org-center" />

<col  class="org-center" />

<col  class="org-center" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-center">State \(n\)</th>
<th scope="col" class="org-center">Neighbors</th>
<th scope="col" class="org-center">State \(n+1\)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">0</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">1</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">2</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">3</td>
<td class="org-center"><i><b>alive</b></i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">4</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">5</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">6</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">7</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>dead</i></td>
<td class="org-center">8</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">0</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">1</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">2</td>
<td class="org-center"><i><b>alive</b></i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">3</td>
<td class="org-center"><i><b>alive</b></i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">4</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">5</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">6</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">7</td>
<td class="org-center"><i>dead</i></td>
</tr>

<tr>
<td class="org-center"><i>alive</i></td>
<td class="org-center">8</td>
<td class="org-center"><i>dead</i></td>
</tr>
</tbody>
</table>


<p>
In a cell transition step, most of combinations in the table result in a <code>dead</code> value. To implement the procedure <code>lifeCellFuture</code> one must handle the bold cases:
</p>
<ul class="org-ul">
<li>When a cell has 3 neighbors it always results in <code>alive</code>.</li>
<li>When a cell has 2 neighbors then the previous value prevails.</li>
<li>Otherwise, the cell remains <code>dead</code> or dies.</li>
</ul>
</div>
<div id="outline-container-orgcb365a5" class="outline-4">
<h4 id="orgcb365a5"><span class="section-number-4">3.2.1</span> <code>&lt;src/life.js&gt;</code></h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">cellFuture</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">life</span>, <span style="color: #DFDFDF;">i</span>, <span style="color: #DFDFDF;">j</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">switch</span> <span style="color: #c678dd;">(</span>neighbors<span style="color: #98be65;">(</span>life, i, j<span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
  <span style="color: #51afef;">case</span> 3:
    <span style="color: #51afef;">return</span> alive;
  <span style="color: #51afef;">case</span> 2:
    <span style="color: #51afef;">return</span> ref<span style="color: #98be65;">(</span>life, i, j<span style="color: #98be65;">)</span>;
  <span style="color: #51afef;">default</span>:
    <span style="color: #51afef;">return</span> dead;
  <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
Finally, to evolve the whole GOL grid and return the next version, one can use the abstractions previously defined:
</p>
</div>
</div>

<div id="outline-container-org26a254d" class="outline-4">
<h4 id="org26a254d"><span class="section-number-4">3.2.2</span> <code>&lt;src/life.js&gt;</code></h4>
<div class="outline-text-4" id="text-3-2-2">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">evolve</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">life</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> make<span style="color: #c678dd;">(</span>countRows<span style="color: #98be65;">(</span>life<span style="color: #98be65;">)</span>, countCols<span style="color: #98be65;">(</span>life<span style="color: #98be65;">)</span>,
              <span style="color: #98be65;">(</span>i, j<span style="color: #98be65;">)</span> =&gt; cellFuture<span style="color: #98be65;">(</span>life, i, j<span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7353222" class="outline-3">
<h3 id="org7353222"><span class="section-number-3">3.3</span> Interface</h3>
<div class="outline-text-3" id="text-3-3">
<p>
The file <code>src/life.js</code> contains the code from this section, the object <code>life</code> is the interface used in other files;
</p>
</div>

<div id="outline-container-orgdd22319" class="outline-4">
<h4 id="orgdd22319"><span class="section-number-4">3.3.1</span> <code>&lt;src/life.js&gt;</code></h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">var</span> <span style="color: #DFDFDF;">life</span> = <span style="color: #51afef;">{}</span>;
life.alive = alive;
life.dead = dead;
life.make = make;
life.countRows = countRows;
life.countCols = countCols;
life.ref = ref;
life.set = set;
life.evolve = evolve;
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd0bc194" class="outline-2">
<h2 id="orgd0bc194"><span class="section-number-2">4</span> React JS Components</h2>
<div class="outline-text-2" id="text-4">
<p>
From what I understand, React JS components are the algorithmic representation of some substructure in an HTML document.
</p>

<p>
To implement the interface for GOL I imagined how the HTML will look. Obviously there must be some kind of grid, and some controls to play/pause the game, kill every cell and generate a random initial condition. Also, the cells in the grid must be clickable to toggle their value.
</p>

<p>
The code in this section uses the <code>life.js</code> source file.
</p>

<p>
To accomplish the stated vision, create the <code>ConwaysGame</code> <i>component</i> that will have as state a GOL grid, and a flag that determines wether the game is playing or is paused. Also, one must handle the click of a cell, and the clicks of every button. The general structure of <code>ConwaysGame</code> is:
</p>
</div>

<div id="outline-container-org1b39057" class="outline-4">
<h4 id="org1b39057"><span class="section-number-4">4.0.1</span> <code>&lt;src/reactlife.jsx&gt;</code></h4>
<div class="outline-text-4" id="text-4-0-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">class</span> ConwaysGame <span style="color: #51afef;">extends</span> React.Component <span style="color: #51afef;">{</span>
  &lt;&lt;gol-constructor&gt;&gt;
  &lt;&lt;gol-timer-setup&gt;&gt;
  &lt;&lt;gol-simulation&gt;&gt;
  &lt;&lt;gol-grid-click&gt;&gt;
  &lt;&lt;gol-play-pause-click&gt;&gt;
  &lt;&lt;gol-clear-click&gt;&gt;
  &lt;&lt;gol-randomize-click&gt;&gt;
  render<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span> 
    <span style="color: #51afef;">return</span> <span style="color: #98be65;">(</span>
        &lt;&lt;gol-view&gt;&gt;
    <span style="color: #98be65;">)</span>;
  <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0dd512a" class="outline-3">
<h3 id="org0dd512a"><span class="section-number-3">4.1</span> Evolving life periodically</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The first thing one must set in place is the ability to update the grid as times goes on. This is done by setting a timer with the <code>setInterval</code> function, and with each tick of the timer the state of GOL must evolve. The <code>componentDidMount</code> function from the React component lifecycle, get's called after the rendering of the component, here one must set an interval with ticks every 10 milliseconds. The <code>componentWillUnmount</code> function get's called before the component is removed from the DOM, here the interval get's cleared and the <code>evolve</code> function won't be invoked.
</p>
</div>

<div id="outline-container-org7280384" class="outline-4">
<h4 id="org7280384"><span class="section-number-4">4.1.1</span> <code>&lt;&lt;gol-timer-setup&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">
<pre class="src src-js">componentDidMount<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  <span style="color: #a9a1e1;">this</span>.gameId = setInterval<span style="color: #c678dd;">(</span><span style="color: #98be65;">()</span> =&gt; <span style="color: #a9a1e1;">this</span>.evolve<span style="color: #98be65;">()</span>, 10<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>

componentWillUnmount<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  clearInterval<span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span>.gameId<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
The definition of the <code>evolve</code> function is pretty straight-forward. When the simulation must be playing (that is, when <code>state.playing</code> is <code>true</code>) a new state is set with <code>state.grid</code> updated to a new GOL configuration given by <code>life.evolve</code>:
</p>
</div>
</div>

<div id="outline-container-orgbf0a80a" class="outline-4">
<h4 id="orgbf0a80a"><span class="section-number-4">4.1.2</span> <code>&lt;&lt;gol-simulation&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-1-2">
<div class="org-src-container">
<pre class="src src-js">evolve<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">if</span> <span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span>.state.playing<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #a9a1e1;">this</span>.setState<span style="color: #98be65;">(</span><span style="color: #da8548;">(</span>previous, props<span style="color: #da8548;">)</span> =&gt; <span style="color: #da8548;">(</span><span style="color: #a9a1e1;">{</span>
      grid: life.evolve<span style="color: #b0b0b3;">(</span>previous.grid<span style="color: #b0b0b3;">)</span>,
      playing: previous.playing
    <span style="color: #a9a1e1;">}</span><span style="color: #da8548;">)</span><span style="color: #98be65;">)</span>;
  <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga52bbf6" class="outline-3">
<h3 id="orga52bbf6"><span class="section-number-3">4.2</span> Controlling the grid</h3>
<div class="outline-text-3" id="text-4-2">
<p>
There are four different ways to controll the grid:
</p>
<ul class="org-ul">
<li>Clicking on a particular location of the grid.</li>
<li>Clicking the play/pause button.</li>
<li>Clicking the clear button.</li>
<li>Clicking the randomize button.</li>
</ul>

<p>
The <code>handleGridClick</code> function will take the clicked location as arguments and change the internal state to a toggled version of that location, that is, if the cell was dead now it will be alive and vice versa.
</p>
</div>

<div id="outline-container-org12ccd50" class="outline-4">
<h4 id="org12ccd50"><span class="section-number-4">4.2.1</span> <code>&lt;&lt;gol-grid-click&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">
<pre class="src src-js">handleGridClick<span style="color: #51afef;">(</span>i, j<span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">grid</span> = <span style="color: #a9a1e1;">this</span>.state.grid;
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">cell</span> = life.ref<span style="color: #c678dd;">(</span>grid, i, j<span style="color: #c678dd;">)</span>;
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">modcell</span> = <span style="color: #c678dd;">(</span>cell == life.alive<span style="color: #c678dd;">)</span> ? life.dead : life.alive;
  <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">modgrid</span> = life.make<span style="color: #c678dd;">(</span>life.countRows<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>, life.countCols<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>,
                          <span style="color: #98be65;">(</span>k, p<span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">(</span><span style="color: #da8548;">(</span>i == k<span style="color: #da8548;">)</span> &amp;&amp; <span style="color: #da8548;">(</span>j == p<span style="color: #da8548;">)</span> ? modcell : life.ref<span style="color: #da8548;">(</span>grid, k, p<span style="color: #da8548;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.setState<span style="color: #c678dd;">(</span><span style="color: #98be65;">(</span>previous, props<span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">(</span><span style="color: #da8548;">{</span>
    grid: modgrid,
    playing: previous.playing
  <span style="color: #da8548;">}</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
The <code>handlePlayPause</code> function will be a thunk that toggles the value of <code>state.playing</code>:
</p>
</div>
</div>

<div id="outline-container-orga599181" class="outline-4">
<h4 id="orga599181"><span class="section-number-4">4.2.2</span> <code>&lt;&lt;gol-play-pause-click&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-2-2">
<div class="org-src-container">
<pre class="src src-js">handlePlayPauseClick<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  <span style="color: #a9a1e1;">this</span>.setState<span style="color: #c678dd;">(</span><span style="color: #98be65;">{</span>
    grid: <span style="color: #a9a1e1;">this</span>.state.grid,
    playing: !<span style="color: #a9a1e1;">this</span>.state.playing
  <span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
The <code>handleClearClick</code> function will be a thunk that resets <code>state.grid</code> to just dead cells:
</p>
</div>
</div>

<div id="outline-container-orgc59584b" class="outline-4">
<h4 id="orgc59584b"><span class="section-number-4">4.2.3</span> <code>&lt;&lt;gol-clear-click&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-2-3">
<div class="org-src-container">
<pre class="src src-js">handleClearClick<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">grid</span> = <span style="color: #a9a1e1;">this</span>.state.grid;
  <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">modgrid</span> = life.make<span style="color: #c678dd;">(</span>life.countRows<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>, life.countCols<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>, <span style="color: #98be65;">()</span> =&gt; life.dead<span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.setState<span style="color: #c678dd;">(</span><span style="color: #98be65;">{</span>
    grid: modgrid,
    playing: <span style="color: #a9a1e1;">this</span>.state.playing
  <span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
Finally, the <code>handleRandomizeClick</code> will be a thunk that resets <code>state.grid</code> to cells either dead or alive with a random distribution:
</p>
</div>
</div>

<div id="outline-container-org6e1ed14" class="outline-4">
<h4 id="org6e1ed14"><span class="section-number-4">4.2.4</span> <code>&lt;&lt;gol-randomize-click&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-2-4">
<div class="org-src-container">
<pre class="src src-js">handleRandomizeClick<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">grid</span> = <span style="color: #a9a1e1;">this</span>.state.grid;
  <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">randomgrid</span> = life.make<span style="color: #c678dd;">(</span>life.countRows<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>, life.countCols<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>,
                             <span style="color: #98be65;">()</span> =&gt; <span style="color: #a9a1e1;">this</span>.randomCell<span style="color: #98be65;">()</span><span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.setState<span style="color: #c678dd;">(</span><span style="color: #98be65;">{</span>
    grid: randomgrid,
    playing: <span style="color: #a9a1e1;">this</span>.state.playing
  <span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>

randomCell<span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">outcomes</span> = <span style="color: #c678dd;">[</span>life.dead, life.alive<span style="color: #c678dd;">]</span>;
  <span style="color: #51afef;">return</span> outcomes<span style="color: #c678dd;">[</span>Math.floor<span style="color: #98be65;">(</span>outcomes.length * Math.random<span style="color: #da8548;">()</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">]</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org17ebb0e" class="outline-3">
<h3 id="org17ebb0e"><span class="section-number-3">4.3</span> GOL initialization</h3>
<div class="outline-text-3" id="text-4-3">
<p>
The <code>ConwaysGame</code> component will be instantiated as:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">ConwaysGame</span> nrows=n ncols=m /&gt;
</pre>
</div>
<p>
so that the <code>nrows</code> and <code>ncols</code> properties, which determine the size of the grid, can be accessed.
</p>

<p>
The constructor does the basic initialization: setting the initial state and binding the <code>this</code> value for the functions defined previously:
</p>
</div>

<div id="outline-container-orga0339d4" class="outline-4">
<h4 id="orga0339d4"><span class="section-number-4">4.3.1</span> <code>&lt;&lt;gol-constructor&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">
<pre class="src src-js">constructor<span style="color: #51afef;">(</span>props<span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">super</span><span style="color: #c678dd;">(</span>props<span style="color: #c678dd;">)</span>;
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">nrows</span> = props.nrows;
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">ncols</span> = props.ncols;
  <span style="color: #a9a1e1;">this</span>.state = <span style="color: #c678dd;">{</span>
    grid: life.make<span style="color: #98be65;">(</span>nrows, ncols, <span style="color: #da8548;">()</span> =&gt; life.dead<span style="color: #98be65;">)</span>,
    playing: <span style="color: #a9a1e1;">false</span>
  <span style="color: #c678dd;">}</span>;
  <span style="color: #a9a1e1;">this</span>.handleGridClick = <span style="color: #a9a1e1;">this</span>.handleGridClick.bind<span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span><span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.handlePlayPauseClick = <span style="color: #a9a1e1;">this</span>.handlePlayPauseClick.bind<span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span><span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.handleClearClick = <span style="color: #a9a1e1;">this</span>.handleClearClick.bind<span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span><span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.handleRandomizeClick = <span style="color: #a9a1e1;">this</span>.handleRandomizeClick.bind<span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span><span style="color: #c678dd;">)</span>;
  <span style="color: #a9a1e1;">this</span>.evolve = <span style="color: #a9a1e1;">this</span>.evolve.bind<span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">this</span><span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
Finally the <code>render</code> function return value get's setup, which delegates the rendering of the controls and the grid to the <code>PlayPauseButton</code>, <code>ClearButton</code>, <code>RandomizeButton</code> and <code>VisualGrid</code> components, which will be simpler than <code>ConwaysGame</code> and won't hold any state.
</p>
</div>
</div>

<div id="outline-container-orged064e2" class="outline-4">
<h4 id="orged064e2"><span class="section-number-4">4.3.2</span> <code>&lt;&lt;gol-view&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-3-2">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"gol-main"</span>&gt;
  &lt;<span style="color: #c678dd;">div</span> <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"gol-controls"</span>&gt;
    &lt;<span style="color: #c678dd;">PlayPauseButton</span>
      callback={this.handlePlayPauseClick}
      status={this.state.playing} /&gt;
    &lt;<span style="color: #c678dd;">ClearButton</span>
      callback={this.handleClearClick} /&gt;
    &lt;<span style="color: #c678dd;">RandomizeButton</span>
      callback={this.handleRandomizeClick} /&gt;
  &lt;/<span style="color: #c678dd;">div</span>&gt;
  &lt;<span style="color: #c678dd;">VisualGrid</span>
    callback={this.handleGridClick}
    grid={this.state.grid} /&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org910975a" class="outline-3">
<h3 id="org910975a"><span class="section-number-3">4.4</span> Playing and pausing the game</h3>
<div class="outline-text-3" id="text-4-4">
<p>
The <code>PlayPauseButton</code> component renders different buttons depending on the value of <code>props.status</code>:
</p>
</div>

<div id="outline-container-org62091ba" class="outline-4">
<h4 id="org62091ba"><span class="section-number-4">4.4.1</span> <code>&lt;src/reactlife.jsx&gt;</code></h4>
<div class="outline-text-4" id="text-4-4-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">PlayPauseButton</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">props</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">status</span> = props.status;
  <span style="color: #51afef;">if</span> <span style="color: #c678dd;">(</span>status<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #51afef;">return</span> <span style="color: #98be65;">(</span>
        &lt;&lt;control-pause&gt;&gt;
    <span style="color: #98be65;">)</span>;
  <span style="color: #c678dd;">}</span> <span style="color: #51afef;">else</span> <span style="color: #c678dd;">{</span>
    <span style="color: #51afef;">return</span> <span style="color: #98be65;">(</span> 
        &lt;&lt;control-play&gt;&gt;
    <span style="color: #98be65;">)</span>;
  <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
These buttons are represented in the following way:
</p>
</div>
</div>

<div id="outline-container-org96f6dc6" class="outline-4">
<h4 id="org96f6dc6"><span class="section-number-4">4.4.2</span> <code>&lt;&lt;control-pause&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-4-2">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> onClick={props.callback} <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"btn-pause"</span>&gt;
  &lt;<span style="color: #c678dd;">b</span>&gt;<span style="font-weight: bold;">Pause</span>&lt;/<span style="color: #c678dd;">b</span>&gt;
&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org69bb265" class="outline-4">
<h4 id="org69bb265"><span class="section-number-4">4.4.3</span> <code>&lt;&lt;control-play&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-4-3">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> onClick={props.callback} <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"btn-play"</span>&gt;
  &lt;<span style="color: #c678dd;">b</span>&gt;<span style="font-weight: bold;">Play</span>&lt;/<span style="color: #c678dd;">b</span>&gt;
&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge6ab90f" class="outline-3">
<h3 id="orge6ab90f"><span class="section-number-3">4.5</span> Clearing and randomizing the game</h3>
<div class="outline-text-3" id="text-4-5">
<p>
These buttons are simmilar to <code>PlayPauseButton</code>:
</p>
</div>

<div id="outline-container-orgaf251e3" class="outline-4">
<h4 id="orgaf251e3"><span class="section-number-4">4.5.1</span> <code>&lt;src/reactlife.jsx&gt;</code></h4>
<div class="outline-text-4" id="text-4-5-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">ClearButton</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">props</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> <span style="color: #c678dd;">(</span> 
      &lt;&lt;control-clear&gt;&gt;
  <span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ba7497" class="outline-4">
<h4 id="org8ba7497"><span class="section-number-4">4.5.2</span> <code>&lt;src/reactlife.jsx&gt;</code></h4>
<div class="outline-text-4" id="text-4-5-2">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">RandomizeButton</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">props</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">return</span> <span style="color: #c678dd;">(</span>
      &lt;&lt;control-randomize&gt;&gt; 
  <span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
Where <code>&lt;&lt;control-clear&gt;&gt;</code> and <code>&lt;&lt;control-randomize&gt;&gt;</code> have obvious definitions:
</p>
</div>
</div>

<div id="outline-container-org349c107" class="outline-4">
<h4 id="org349c107"><span class="section-number-4">4.5.3</span> <code>&lt;&lt;control-clear&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-5-3">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> onClick={props.callback} <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"btn-clear"</span>&gt;
  &lt;<span style="color: #c678dd;">b</span>&gt;<span style="font-weight: bold;">Clear</span>&lt;/<span style="color: #c678dd;">b</span>&gt;
&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2105e8d" class="outline-4">
<h4 id="org2105e8d"><span class="section-number-4">4.5.4</span> <code>&lt;&lt;control-randomize&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-5-4">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> onClick={props.callback} <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"btn-randomize"</span>&gt;
  &lt;<span style="color: #c678dd;">b</span>&gt;<span style="font-weight: bold;">Randomize</span>&lt;/<span style="color: #c678dd;">b</span>&gt;
&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org456652b" class="outline-3">
<h3 id="org456652b"><span class="section-number-3">4.6</span> Grid visualization</h3>
<div class="outline-text-3" id="text-4-6">
<p>
This last component takes care of rendering the grid as an HTML table, where each cell has a different click callback:
</p>
</div>

<div id="outline-container-orgcfb5798" class="outline-4">
<h4 id="orgcfb5798"><span class="section-number-4">4.6.1</span> <code>&lt;src/reactlife.jsx&gt;</code></h4>
<div class="outline-text-4" id="text-4-6-1">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #51afef;">function</span> <span style="color: #c678dd;">VisualGrid</span><span style="color: #51afef;">(</span><span style="color: #DFDFDF;">props</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
  <span style="color: #51afef;">const</span> <span style="color: #DFDFDF;">grid</span> = props.grid;
  <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">rows</span> = Array<span style="color: #c678dd;">(</span>life.countRows<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span>;
  <span style="color: #51afef;">for</span> <span style="color: #c678dd;">(</span><span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">i</span> = 0; i &lt; life.countRows<span style="color: #98be65;">(</span>grid<span style="color: #98be65;">)</span>; i++<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">arr</span> = Array<span style="color: #98be65;">(</span>life.countCols<span style="color: #da8548;">(</span>grid<span style="color: #da8548;">)</span><span style="color: #98be65;">)</span>;
    <span style="color: #51afef;">for</span> <span style="color: #98be65;">(</span><span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">j</span> = 0; j &lt; life.countCols<span style="color: #da8548;">(</span>grid<span style="color: #da8548;">)</span>; j++<span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
      <span style="color: #51afef;">let</span> <span style="color: #DFDFDF;">cell</span> = life.ref<span style="color: #da8548;">(</span>grid, i, j<span style="color: #da8548;">)</span>;
      arr<span style="color: #da8548;">[</span>j<span style="color: #da8548;">]</span> = <span style="color: #da8548;">(</span>
          &lt;&lt;table-cell&gt;&gt;
      <span style="color: #da8548;">)</span>;
    <span style="color: #98be65;">}</span>
    rows<span style="color: #98be65;">[</span>i<span style="color: #98be65;">]</span> = <span style="color: #98be65;">(</span>
        &lt;&lt;table-row&gt;&gt;
    <span style="color: #98be65;">)</span>;
  <span style="color: #c678dd;">}</span>
  <span style="color: #51afef;">return</span> <span style="color: #c678dd;">(</span>
      &lt;&lt;table-main&gt;&gt;
  <span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
The visual representation of a cell's value is the background color of an HTML table cell:
</p>
</div>
</div>

<div id="outline-container-orgce7542a" class="outline-4">
<h4 id="orgce7542a"><span class="section-number-4">4.6.2</span> <code>&lt;&lt;table-cell&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-6-2">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">td</span> key={j} <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"cell"</span> style={{backgroundColor: (cell == life.alive ? <span style="color: #98be65;">"white"</span> : <span style="color: #98be65;">"black"</span>)}}
    onClick={ () =&gt; props.callback(i, j) }
  /&gt;
</pre>
</div>

<p>
The rest of the table structure is trivial:
</p>
</div>
</div>

<div id="outline-container-org9a3409e" class="outline-4">
<h4 id="org9a3409e"><span class="section-number-4">4.6.3</span> <code>&lt;&lt;table-row&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-6-3">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">tr</span> key={i}&gt;
  { arr }
&lt;/<span style="color: #c678dd;">tr</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4edba7" class="outline-4">
<h4 id="orgf4edba7"><span class="section-number-4">4.6.4</span> <code>&lt;&lt;table-main&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-6-4">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">table</span> <span style="color: #DFDFDF;">className</span>=<span style="color: #98be65;">"grid"</span>&gt;
  &lt;<span style="color: #c678dd;">tbody</span>&gt;
    { rows }
  &lt;/<span style="color: #c678dd;">tbody</span>&gt;
&lt;/<span style="color: #c678dd;">table</span>&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org125aa13" class="outline-3">
<h3 id="org125aa13"><span class="section-number-3">4.7</span> Rendering into the DOM</h3>
<div class="outline-text-3" id="text-4-7">
<p>
The last step is render the <code>ConwaysGame</code> component in the DOM using the <code>render</code> function from <code>ReactDOM</code>. The following chunk of code injects <code>&lt;&lt;conways-game&gt;&gt;</code> in the HTML element with ID <code>root</code>:
</p>
</div>

<div id="outline-container-org6b2952a" class="outline-4">
<h4 id="org6b2952a"><span class="section-number-4">4.7.1</span> <code>&lt;src/reactlife.jsx&gt;</code></h4>
<div class="outline-text-4" id="text-4-7-1">
<div class="org-src-container">
<pre class="src src-js">ReactDOM.render<span style="color: #51afef;">(</span>
  &lt;&lt;conways-game&gt;&gt;,
  document.getElementById<span style="color: #c678dd;">(</span><span style="color: #98be65;">'root'</span><span style="color: #c678dd;">)</span>
<span style="color: #51afef;">)</span>;
</pre>
</div>

<p>
The number of rows and columns are set to 30:
</p>
</div>
</div>

<div id="outline-container-org339a418" class="outline-4">
<h4 id="org339a418"><span class="section-number-4">4.7.2</span> <code>&lt;&lt;conways-game&gt;&gt;</code></h4>
<div class="outline-text-4" id="text-4-7-2">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">ConwaysGame</span> ncols={30} nrows={30} /&gt;
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org244d9ac" class="outline-2">
<h2 id="org244d9ac"><span class="section-number-2">5</span> The HTML document</h2>
<div class="outline-text-2" id="text-5">
<p>
This last section includes the main HTML and CSS files:
</p>
</div>

<div id="outline-container-org0283fc1" class="outline-4">
<h4 id="org0283fc1"><span class="section-number-4">5.0.1</span> <code>&lt;src/index.html&gt;</code></h4>
<div class="outline-text-4" id="text-5-0-1">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #51afef;">!DOCTYPE</span> html&gt;
&lt;<span style="color: #c678dd;">html</span>&gt;
  &lt;<span style="color: #c678dd;">head</span>&gt;
    &lt;<span style="color: #c678dd;">meta</span> <span style="color: #DFDFDF;">charset</span>=<span style="color: #98be65;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #c678dd;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Conway's Game of Life</span>&lt;/<span style="color: #c678dd;">title</span>&gt;
    &lt;<span style="color: #c678dd;">script</span> <span style="color: #DFDFDF;">src</span>=<span style="color: #98be65;">"https://unpkg.com/react@latest/dist/react.js"</span>&gt;&lt;/<span style="color: #c678dd;">script</span>&gt;
    &lt;<span style="color: #c678dd;">script</span> <span style="color: #DFDFDF;">src</span>=<span style="color: #98be65;">"https://unpkg.com/react-dom@latest/dist/react-dom.js"</span>&gt;&lt;/<span style="color: #c678dd;">script</span>&gt;
    &lt;<span style="color: #c678dd;">script</span> <span style="color: #DFDFDF;">src</span>=<span style="color: #98be65;">"https://unpkg.com/babel-standalone@6.15.0/babel.min.js"</span>&gt;&lt;/<span style="color: #c678dd;">script</span>&gt;
    &lt;<span style="color: #c678dd;">link</span> <span style="color: #DFDFDF;">rel</span>=<span style="color: #98be65;">"stylesheet"</span> <span style="color: #DFDFDF;">type</span>=<span style="color: #98be65;">"text/css"</span>
          <span style="color: #DFDFDF;">href</span>=<span style="color: #98be65;">"../style/solarized-light.css"</span> /&gt;
    &lt;<span style="color: #c678dd;">link</span> <span style="color: #DFDFDF;">href</span>=<span style="color: #98be65;">"https://fonts.googleapis.com/css?family=Alegreya|Alegreya+SC"</span> <span style="color: #DFDFDF;">rel</span>=<span style="color: #98be65;">"stylesheet"</span>&gt;
    &lt;<span style="color: #c678dd;">style</span>&gt; body { font-family: 'Alegreya', serif; } &lt;/<span style="color: #c678dd;">style</span>&gt;
    &lt;<span style="color: #c678dd;">style</span>&gt; h1, h2, h3 { font-family: 'Alegreya SC', serif; } &lt;/<span style="color: #c678dd;">style</span>&gt;
    &lt;<span style="color: #c678dd;">link</span> <span style="color: #DFDFDF;">rel</span>=<span style="color: #98be65;">"stylesheet"</span> <span style="color: #DFDFDF;">href</span>=<span style="color: #98be65;">"style.css"</span>&gt;
  &lt;/<span style="color: #c678dd;">head</span>&gt;
  &lt;<span style="color: #c678dd;">body</span>&gt;
    &lt;<span style="color: #c678dd;">h1</span> <span style="color: #DFDFDF;">style</span>=<span style="color: #98be65;">"text-align: center;"</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Conway's Game of Life Demo</span>&lt;/<span style="color: #c678dd;">h1</span>&gt;
    &lt;<span style="color: #c678dd;">div</span> <span style="color: #DFDFDF;">id</span>=<span style="color: #98be65;">"root"</span>&gt;&lt;/<span style="color: #c678dd;">div</span>&gt;

    &lt;<span style="color: #c678dd;">script</span> <span style="color: #DFDFDF;">src</span>=<span style="color: #98be65;">"grid.js"</span>&gt;&lt;/<span style="color: #c678dd;">script</span>&gt;
    &lt;<span style="color: #c678dd;">script</span> <span style="color: #DFDFDF;">src</span>=<span style="color: #98be65;">"life.js"</span>&gt;&lt;/<span style="color: #c678dd;">script</span>&gt;
    &lt;<span style="color: #c678dd;">script</span> <span style="color: #DFDFDF;">type</span>=<span style="color: #98be65;">"text/babel"</span> <span style="color: #DFDFDF;">src</span>=<span style="color: #98be65;">"reactlife.jsx"</span>&gt;&lt;/<span style="color: #c678dd;">script</span>&gt;
  &lt;/<span style="color: #c678dd;">body</span>&gt;
&lt;/<span style="color: #c678dd;">html</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0d1520" class="outline-4">
<h4 id="orgb0d1520"><span class="section-number-4">5.0.2</span> <code>&lt;src/style.css&gt;</code></h4>
<div class="outline-text-4" id="text-5-0-2">
<div class="org-src-container">
<pre class="src src-css"><span style="color: #51afef;">.gol-main </span><span style="color: #51afef;">{}</span>

<span style="color: #51afef;">.gol-controls </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">text-align</span>: center;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">.btn-pause </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">margin</span>: 10px;
    <span style="color: #98be65;">width</span>: 100px;
    <span style="color: #98be65;">display</span>: inline-block;
    <span style="color: #98be65;">background-color</span>: #eee8d5;
    <span style="color: #98be65;">border</span>: 1pt solid #93a1a1;
    <span style="color: #98be65;">color</span>: #d33682;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">.btn-play </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">margin</span>: 10px;
    <span style="color: #98be65;">width</span>: 100px;
    <span style="color: #98be65;">display</span>: inline-block;
    <span style="color: #98be65;">background-color</span>: #eee8d5;
    <span style="color: #98be65;">border</span>: 1pt solid #93a1a1;
    <span style="color: #98be65;">color</span>: #d33682;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">.btn-clear </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">margin</span>: 10px;
    <span style="color: #98be65;">width</span>: 100px;
    <span style="color: #98be65;">display</span>: inline-block;
    <span style="color: #98be65;">background-color</span>: #eee8d5;
    <span style="color: #98be65;">border</span>: 1pt solid #93a1a1;
    <span style="color: #98be65;">color</span>: #d33682;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">.btn-randomize </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">margin</span>: 10px;
    <span style="color: #98be65;">width</span>: 100px;
    <span style="color: #98be65;">display</span>: inline-block;
    <span style="color: #98be65;">background-color</span>: #eee8d5;
    <span style="color: #98be65;">border</span>: 1pt solid #93a1a1;
    <span style="color: #98be65;">color</span>: #d33682;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">.cell </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">display</span>: inline-block;
    <span style="color: #98be65;">width</span>: 22px;
    <span style="color: #98be65;">height</span>: 22px;
    <span style="color: #98be65;">cursor</span>: pointer;
    <span style="color: #98be65;">margin</span>: 0px;
    <span style="color: #98be65;">padding</span>: 0px;
    <span style="color: #98be65;">border</span>: solid 1px #333;
<span style="color: #51afef;">}</span>

<span style="color: #51afef;">.grid </span><span style="color: #51afef;">{</span>
    <span style="color: #98be65;">margin</span>: auto;
    <span style="color: #98be65;">border-spacing</span>: 0px;
    <span style="color: #98be65;">border</span>: solid 2px #333;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
